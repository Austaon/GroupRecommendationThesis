# Database Dumps

This folder contains relevant dumps from the database, meaning it contains the results from both experiment 1 and 2. 
 
The database schemas of each collection are also listed in this README.
Please refer to https://developer.spotify.com/documentation/web-api/reference/#object-trackobject for the schema of a track.
Related objects, such as artists and albums can also be found on the same webpage.

# Schemas

## `sessions` collection
| Name          | Type          | Notes        |
| ------------- |:-------------:|:------------:|
| _id           | ObjectID      | Generated by MongoDB |
| created_at    | Date          |              |
| updated_at    | Date          |              |
| id            | String        | Used in communication |
| playlist_name | String        | Group Purpose |
| recommendations | Array       |              |
| state         | String       |               |
| has_started   | Boolean       | Unused       |

Sessions also contain multiple users.

## `session_users` collection
| Name          | Type          | Notes        |
| ------------- |:-------------:|:------------:|
| _id           | ObjectID      | Generated by MongoDB |
| created_at    | Date          |              |
| updated_at    | Date          |              |
| id            | String        | Spotify ID   |
| session_id    | String        |              |
| email_address | String        |              |
| has_joined    | Boolean       |              |
| is_admin      | Boolean       |              |
| has_filled_in_tracks | Boolean |             |
| tracks        | Array         | Selected tracks |
| hovered_tracks | Array        | Interacted tracks |
| seen_tracks   | Array         | Seen tracks  |
| survey        | Object        |              |
| has_spotify_account | Boolean       | Unused (Always true) |

### `survey` document
Documentation for the survey result. 
Replace * with 1, 2, or 3 and & with "like", "suitable", or "selection".
Only exception is that `playlist3_like_feedback` can instead be found at `playlist3_like_specific` due to a mistake in setting up the survey.

| Name          | Type          | Notes        |
| ------------- |:-------------:|:------------:|
| playlist*_&_rating | String   |              |
| playlist*_&_rating_specific | Object      | Contains a pair of "Song[1-10]" and a int/string |
| playlist*_&_feedback | String/Undefined |    |
| metadata      | Object        |              |    
| playlist*     | Object        | Contained in metadata, below is in metadata.playlist* |
| distance_metric | Object      | Contains information about the distance metric | 
| rule_name     | Object        | Contains information about the aggregation strategy |
| distances     | Object        | Contains track distances per person |
| generator_list | Array        | Contains track -> score pairs |

# `track_data` collection
An explanation of the acoustic features can be found at: https://developer.spotify.com/documentation/web-api/reference/#object-audiofeaturesobject .
Some tracks have audio features with a value of -1, which means Spotify did not have audio feature data available when it was retrieved.

If the track data originated from the Skip Prediction Challenge dataset, the artist and track name are unavailable,
and the track id is not a Spotify id.

| Name          | Type          | Notes        |
| ------------- |:-------------:|:------------:|
| _id           | ObjectID      | Generated by MongoDB |
| track_id      | String        | Spotify track id |
| name          | String        | Name of the track |
| artist        | String        | Name of the artist |
| artist_id     | String        |              |
| acousticness  | Double        |              |
| danceability  | Double        |              |
| energy        | Double        |              |
| instrumentalness  | Double    |              |
| liveness      | Double        |              |
| loudness      | Double        |              |
| speechiness   | Double        |              |
| tempo         | Double        |              |
| valence       | Double        |              |

# `consent_forms` collection
When an admin user gives consent, the session does not exist yet, the `session_id` field is then set to null.
All data in `consent_form` will be set to true, 
since else a person has not given full consent and would not be able to join or create a session.
| Name          | Type          | Notes        |
| ------------- |:-------------:|:------------:|
| _id           | ObjectID      | Generated by MongoDB |
| created_at    | Date          |              |
| updated_at    | Date          |              |
| email_address | String        |              |
| session_id    | String / Null |              |
| consent_form  | Object        | Consists of a survey.js data |


# Experiment 1 `session_user`
In order to re-use scripts, the `session_user` collection was repurposed to store data from users in the first experiment.

Replace % with `real`, `random`, or `recommended` , & with `artists` or `tracks`, and * with `short`, `medium`, or `long`.
The Artists field are empty in `random` or `recommended`.

| Name          | Type          | Notes        |
| ------------- |:-------------:|:------------:|
| _id           | ObjectID      | Generated by MongoDB |
| id            | String        | Hashed Spotify ID |
| email_address | String        | Contains feedback |
| tracks        | Array         | Selected tracks |
| hovered_tracks | Array        | Empty |
| seen_tracks   | Array         | Empty  |
| survey        | Object        | Contains historical or generated data |
| %             | Object        | (In survey) Denotes the type of the data |
| &_*_term      | Array         | (In %) Contains track or artist data |

